# TeamSpeak 3 Plugin Config Dialog with Qt
  
This is an example on how to create a config dialog for TeamSpeak 3 plugins, using the Qt Libraries that are delivered with the TeamSpeak 3 Client.

### Requirements
- Qt in the **same version that is being used by the TeamSpeak 3 Client**. You can either compile it from official sources or use their precompiled download. I never tested the precompiled versions though, but they're said to be working with recent TeamSpeak Client versions.
- This example assumes you installed Qt to `C:\Qt\` which you can change in [TS3 Plugin Qt.props](Example-TS3-Qt-Gui/props/TS3%20Plugin%20Qt.props#L5). It is further assumed that your Qt directory structure follows `path\x(86|64)\$version` where $version can be pretty much anything and is configurable in [TS3 Plugin Qt.props](Example-TS3-Qt-Gui/props/TS3%20Plugin%20Qt.props#L4)

 

## How To

### General
- Create a new Visual Studio Solution
- Switch project to Dynamic Library (Right click project -> Properties -> General -> Select `Dynamic Library (.dll)` in Configuration Type near the bottom)
- Add the relevant property files (View -> Property Manager). Common goes first, then either x86 or x64 for 32 and 64 bit respectively and then the Qt one.
- Start coding.

### User Interface (ui) Files
- Create with Qt Designer
- Add to Visual Studio Project
- Right click ui file in Solution Explorer -> Properties. Select `Custom Build Tool` in Item Type and hit Apply
- On the left select Custom Build Tool and add `$(QtPath)\bin\uic.exe %(Fullpath) -o $(ProjectDir).vsgen\ui_%(Filename).h` as the Command Line
- Set Outputs to `$(ProjectDir).vsgen\ui_%(Filename).h` or whatever you put after the -o in the command line.
- Run compile, then add the generated file to the solution.

### Classes that inherit from Qt Classes
For example files that include the code for your dialog. See [config.h](Example-TS3-Qt-Gui/config.h) and [config.cpp](Example-TS3-Qt-Gui/config.cpp)

- Right click the header file in Solution Explorer -> Properties. Select `Custom Build Tool` in Item Type and hit Apply
- On the left select Custom Build Tool and add `$(QtPath)\bin\moc.exe %(Fullpath) -o $(ProjectDir).vsgen\%(Filename)_moc.cpp` as the Command Line
- Set Outputs to `$(ProjectDir).vsgen\%(Filename)_moc.cpp` or whatever you put after the -o in the command line.
- Run compile, then add the generated file to the solution.

## Common Issues
- `error LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __thiscall`: You forgot to add files generated by the custom build tool to the solution.
